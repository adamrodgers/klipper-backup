# ==================== options/probe/eddy.cfg ====================

[mcu eddy]
serial: /dev/serial/by-id/usb-Klipper_rp2040_50445061084EAB1C-if00
restart_method: command

[probe_eddy_ng btt_eddy]
sensor_type: ldc1612
i2c_mcu: eddy
i2c_bus: i2c0f
x_offset: -14.903
y_offset: 9.997
reg_drive_current: 17
tap_drive_current: 17
tap_target_z: -0.75
samples_per_second: 250          # Reduced from 500 for more stable readings

[temperature_sensor btt_eddy_mcu]
sensor_type: temperature_mcu
sensor_mcu: eddy
min_temp: 10
max_temp: 100

[temperature_probe btt_eddy]
sensor_type: Generic 3950
sensor_pin: eddy:gpio26
horizontal_move_z: 2
calibration_position: 319,176,5

[bed_mesh]
speed: 200
horizontal_move_z: 2.0
mesh_min: 15,20
mesh_max: 330,335
probe_count: 15,15
algorithm: bicubic
bicubic_tension: 0.5
split_delta_z: 0.0125
mesh_pps: 3,3
adaptive_margin: 5
fade_start: 1
fade_end: 10
fade_target: 0
scan_overshoot: 5

[homing_override]
gcode:
    G91
    G0 Z5 F1000
    {% if not rawparams or 'Y' in rawparams|upper %}
        G28 Y
        G90
        G0 Y192.5 F6000
        M400
    {% endif %}
    {% if not rawparams or 'X' in rawparams|upper %}
        G28 X
        G90
        G0 X177.5 F6000
        M400
    {% endif %}
    {% if not rawparams or 'Z' in rawparams|upper %}
        G90
        G0 X177.5 Y192.5 F6000
        G28 Z
        G91
        G0 Z3 F1000
        M400
        PROBE_EDDY_NG_PROBE_STATIC
        G0 Z5 F1000
    {% endif %}
    G90
axes: xyz
set_position_z: 0

[quad_gantry_level]
gantry_corners:
    -60,-10
    410,420
points:
    40,40                        # Safe distance from edges accounting for probe offset
    40,310                       # Adjusted for probe Y offset of +9.997
    310,310                      # Safe distance from edges
    310,40                       # Covers full bed area within probe limits
speed: 200                       # Reduced from 400 for more precise positioning
horizontal_move_z: 8             # Reduced from 10 for faster operation
retry_tolerance: 0.025           # Increased from 0.015 to reduce oscillation
retries: 6                       # Reduced from 8 to prevent fighting
max_adjust: 5                    # Reduced from 8 for gentler corrections